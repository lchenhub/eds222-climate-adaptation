---
title: "Climate Adaptation and Income"
format: html
editor: visual
---

```{r}
knitr::opts_chunk$set(echo = TRUE)

# Load all the packages needed here
library(tidyverse)
library(readr)
library(gt)
library(tufte)
library(sf)
library(feasts)
library(dplyr)
library(janitor)

# Set the filepath here
rootdir <- ("/Users/lianechen/Documents/MEDS_2023/Fall_2023/EDS222/Final/eds222-climateadapt")

datadir <- file.path(rootdir,"data")
```

```{r}
# Import data
city_indicators <- read.csv("data/City Indicators.csv")
readiness <- read.csv("data/Overall Risk & Readiness Scores.csv")
```

```{r}
# Clean column names for both datasets
city_indicators <- clean_names(city_indicators)
readiness <- clean_names(readiness)
```

```{r}
# Explore data
nrow(city_indicators)
```

```{r}
nrow(readiness)
```

```{r}
merged <- merge(city_indicators, readiness, by = "city", all = TRUE)

nrow(merged)
```

```{r}
colnames(merged)[colnames(merged) == "geo_id.x"] <- "geo_id"
colnames(merged)[colnames(merged) == "state.x"] <- "state"
colnames(merged)[colnames(merged) == "latitutde"] <- "latitude"
```

```{r}
income_readiness <- merged[, c("city", "state", "geo_id", "percent_of_population_spending_over_50_percent_of_income_on_rent_2015", "percent_of_population_in_poverty_2015", "latitude", "longitude", "county", "region", "median_income", "overall_readiness")]
```
